
%\NeedsTexFormat{LaTeX2e}
\ProvidesPackage{ISFormat}[2014/04/03 ISFormat package]

\RequirePackage{array}
\RequirePackage{xstring}
\RequirePackage{varwidth}
\def\arraystretch{1.5}	

\newcommand{\Imnemonic}[2]
{
	\newpage
	%{\LARGE #1 #2}
	\subsection{#2 \hfill #1}
	\quad\\
}
\newcommand{\Iformat}[2]
{
	\indent\textbf{Format}
	\begin{table}[h]
		\centering
		\if A#1 %opcode[5]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \StrChar{#2}{3} & \StrChar{#2}{4} & \StrChar{#2}{5} & \multicolumn{3}{|c|}{Rd} & \multicolumn{3}{|c|}{Ra} & \multicolumn{3}{|c|}{Rb} & X & \multicolumn{1}{c|}{X} \\
				\hline
			\end{tabular}
		\fi
		\if a#1 %opcode[5]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \StrChar{#2}{3} & \StrChar{#2}{4} & \StrChar{#2}{5} & \multicolumn{3}{|c|}{Rd} & \multicolumn{3}{|c|}{Ra} & \multicolumn{5}{|c|}{imm4/5} \\
				\hline
			\end{tabular}
		\fi
		\if B#1 %opcode[5]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \StrChar{#2}{3} & \StrChar{#2}{4} & \StrChar{#2}{5} & \multicolumn{3}{|c|}{Rd} & \multicolumn{8}{|c|}{imm8} \\
				\hline
			\end{tabular}
		\fi
		\if C#1 %LS[1]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{0} & \multicolumn{1}{|c|}{\StrChar{#2}{1}} & 0 & 0 & 0 & \multicolumn{3}{|c|}{Rd} & \multicolumn{3}{|c|}{Ra} & \multicolumn{5}{|c|}{imm5} \\
				\hline
			\end{tabular}
		\fi
		\if D#1 %Cond.[3]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{1} & 1 & 1 & 1 & 0 & \multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \multicolumn{1}{c|}{\StrChar{#2}{3}} & \multicolumn{8}{|c|}{imm8} \\
				\hline
			\end{tabular}
		\fi
		\if d#1  %Cond.[3]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{1} & 1 & 1 & 1 & 0 & \multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \multicolumn{1}{c|}{\StrChar{#2}{3}} & \multicolumn{3}{|c|}{Ra} & \multicolumn{5}{|c|}{imm5} \\
				\hline
			\end{tabular}
		\fi
		\if E#1 %U[1] L[1]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{0} & \multicolumn{1}{|c|}{\StrChar{#2}{1}} & 0 & 0 & 1 & \multicolumn{1}{|c|}{\StrChar{#2}{2}} & X & X & \multicolumn{3}{|c|}{Ra} & X & X & X & X & \multicolumn{1}{c|}{X} \\
				\hline
			\end{tabular}
		\fi
		\if F#1 %ICond.[3]
			\begin{tabular}{cccccccccccccccc}
				15 & 14 & 13 & 12 & 11 & 10 & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 \\
				\hline
				\multicolumn{1}{|c}{1} & 1 & 0 & 0 & 1 & \multicolumn{1}{|c}{\StrChar{#2}{1}} & \StrChar{#2}{2} & \multicolumn{1}{c|}{\StrChar{#2}{3}} & 1 & 1 & \multicolumn{1}{c|}{1} & X & X & X & X & \multicolumn{1}{c|}{X} \\
				\hline
			\end{tabular}
		\fi
	\end{table}
	\\\\
}
\newcommand{\Isyntax}[3][S]
{
	\if S#1 %Single: Use for only one syntax
		\indent\textbf{Syntax} \\
		\indent\indent#2 \hfill eg. #3\\\\\\
	\fi
	\if M#1 %Multiple: Use for first entry of multiple syntaxs
		\indent\textbf{Syntax} \\
		\indent\indent#2 \hfill eg. #3
	\fi
	\if E#1 %Extra: Use for middle entry of multiple syntaxs
		\indent\indent#2 eg. #3\\
	\fi
	\if F#1 %Final: Use for last entry of multiple syntaxs
		\indent\indent#2 \hfill eg. #3\\\\\\
	\fi
	
}
%Argument Summary: 1:Semantics Text, 2:NewCFlag(C/0), 3:NewVFlag(V/0), 4:V2ndOperand(b/5/8/0), 5:VUseCarry(0/c/n), 6:NewNFlag(N/0), 7:NewZFlag(Z/0)
\newcommand{\Ioperation}[7]
{	
	\indent\textbf{Operation} \\
	\indent\indent#1 \\
	\indent\indent
	\if N#6
		~N $\leftarrow$ Rd[31] \\
	\else
		~N $\leftarrow$ N \\
	\fi
	\indent\indent
	\if Z#7
		~Z $\leftarrow$ if $Rd = 0$ then 1, else 0 \\
	\else
		~Z $\leftarrow$ Z \\
	\fi
	\indent
	\if V#3
		\if b#4
			\if 0#5
				~~~~V $\leftarrow$ if $(+Ra, +Rb, -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -Rb, +Result)$ then 1, else 0 \\
			\fi
			\if c#5
				~~~~V $\leftarrow$ if $(+Ra, +(Rb+CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -(Rb+CFlag), +Result)$ then 1, else 0 \\
			\fi
			\if n#5
				~~~~V $\leftarrow$ if $(+Ra, +(Rb-CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -(Rb-CFlag), +Result)$ then 1, else 0 \\
			\fi
		\fi
		\if 5#4
			\if 0#5
				~~~~V $\leftarrow$ if $(+Ra, +\#imm5, -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -\#imm5, +Result)$ then 1, else 0 \\
			\fi
			\if c#5
				~~~~V $\leftarrow$ if $(+Ra, +(\#imm5+CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -(\#imm5+CFlag), +Result)$ then 1, else 0 \\
			\fi
			\if n#5
				~~~~V $\leftarrow$ if $(+Ra, +(\#imm5-CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Ra, -(\#imm5-CFlag), +Result)$ then 1, else 0 \\
			\fi
		\fi
		\if 8#4
			\if 0#5
				~~~~V $\leftarrow$ if $(+Rd, +\#imm8, -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Rd, -\#imm8, +Result)$ then 1, else 0 \\
			\fi
			\if c#5
				~~~~V $\leftarrow$ if $(+Rd, +(\#imm8+CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Rd, -(\#imm8+CFlag), +Result)$ then 1, else 0 \\
			\fi
			\if n#5
				~~~~V $\leftarrow$ if $(+Rd, +(\#imm8-CFlag), -Result)$ or \\
				\indent\indent\indent\indent~~~ $(-Rd, -(\#imm8-CFlag), +Result)$ then 1, else 0 \\
			\fi
		\fi
		\if 0#4
			~~~~V $\leftarrow$ 0 \\
		\fi
	\else
		~~~~V $\leftarrow$ V \\
	\fi
	\indent\indent
	\if C#2
		~C $\leftarrow$ if $(Result > 2^{15})$ or \\
		\indent\indent\indent\indent~~~ $(Result < -2^{16})$ then 1, else 0 \\
	\else
		~C $\leftarrow$ C \\
	\fi
	\\\\
}
\newcommand{\Idesc}[1]
{
	\indent\textbf{Description} \\
	\indent\indent
	\begin{minipage}[h]{4.9in}
		#1
	\end{minipage}
	\\\\
}
\newcommand{\Ispecial}[1]
{
	#1
}

\endinput